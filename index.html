<!DOCTYPE html>
<html lang="es">
  <head>
    <title>AFD</title>
    <script
      type="text/javascript"
      src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"
    ></script>
    <style type="text/css">
      #mynetwork {
        width: 600px;
        height: 400px;
        padding: auto;
        margin:  auto;
        border: 1px solid rgb(172, 74, 74);
        background: white;
      }
      #histoy{
        width: 600px;
        height: 400px;
        padding: auto;
        margin-left:initial;
        border: 1px solid rgb(0, 0, 0);
        
      }
      
      body{
        background: rgb(2,0,36);
        background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(9,9,121,1) 35%, rgba(0,212,255,1) 100%);
        color: aliceblue;    
        font: 20px;  }
      #lenguaje1{
        background: white;
        color: black;
        font: 20px;
      }  
      #lenguaje2{
        background: white;
        color: black;
        font: 20px;
      }  
      #btnValidar{
        background: white;
        color: black;
        font: 20px;
      }  
      
      
    </style>
  </head>
  <body>
    <button id="lenguaje1" onclick="changeLanguage('es')">Espa√±ol</button>
  <button id="lenguaje2" onclick="changeLanguage('en')">English</button>
      <button id="lenguaje3" onclick="changeLanguage('fc')">Frances</button>
  

    <div id="mynetwork"></div>
    <div id="history"></div>
    <input type="text" id="inputPalabra" method="get" placeholder="Escribe una palabra">
    <button id="btnValidar">Validar Cadena</button>
    <p id="resultado"></p>
    <p id="Simbolos"></p>
    <div class="animation-container">
      <div id="animacion"class="animation">Velocidad</div>
    </div>
    <div class="control-bar">
      <input type="range" min="500" max="1999" value="5" id="speedRange">
    </div>
    <div id="insertar"></div>
    
   <script type="text/javascript">
      // create an array with nodes
      var nodes = new vis.DataSet([
        { id: 0, label: "p", color: {background: "#ff0000", border:"#000000"}, font:{color:"black"}},
        { id: 1, label: "q" ,color: {background: "#ff0000", border:"#000000"}, font:{color:"black"}},
        { id: 2, label: "r",color: {background: "#ff0000"}}
        
      ]);      
      let letras0to0=["b,b/bb","a,b/ba","b,a/ab","a,a/aa","b,#/#b","a,#/#a"];
      let letras0to1=["b,b/B","a,a/B"];
      let letras1to1=["b,b/B","a,a/B"];
      let letras1to2=["B,#/#"];
      function mostrarletras(listadeletras){
        var string="";
        for(const i of listadeletras){
            string=string+i+"\n";
        }
        return string;
      }
      // create an array with edges
      var edges = new vis.DataSet([
        { from: 0,label:mostrarletras(letras0to1) , to: 1, arrows: "to"},
        { from: 1,label:mostrarletras(letras1to2), to: 2, arrows: "to"},
        { from: 1,label:mostrarletras(letras1to1), to: 1, arrows: "to" },
        { from: 0,label:mostrarletras(letras0to0)+"\n\n\n\n\n\n\n\n", to: 0, arrows: "to" }
      ]);
      // create a network
      var container = document.getElementById("mynetwork");
      var data = {
        nodes: nodes,
        edges: edges,
      };
      var options = {
        nodes: {
          shape: "circule",
          size: 20,
          color: {
            background: "#ff0000",
            border: "#000000",
            highlight: {
              background: "#00ff00",
              border: "#000000",
            },
          },
          font: {
            color: "#ffffff",
            size: 14,
          },
        },
        edges: {
          arrows: {
            to: { enabled: true, scaleFactor: 1, type: "arrow" },
          },
        },
      };
      
      
      var network = new vis.Network(container, data, options);
      
      class Pila {
        constructor() {
            this.items = [];
        }

        push(elemento) {
            this.items.push(elemento);
        }

        pop() {
            if (this.items.length === 0) {
            return null;
            }
            return this.items.pop();
        }
        }
        var palabraIngresada=new Pila();
        palabraIngresada.push("b");
        palabraIngresada.push("b");
        palabraIngresada.push("a");
        palabraIngresada.push("b");
        palabraIngresada.push("b");
        palabraIngresada.push("a");
        var simbolosAceptados=new Pila();
     
     function validaCadena(estadoInicial,cadena,simbolosAceptados){
          var estadoActual=estadoInicial;
          var simbolo1=cadena;
          var simbolo2=simbolosAceptados;
          
          console.log(simbolo1.items);
          console.log(simbolo2.items);
         
          console.log("-----segundo if----");
          console.log(simbolo1.get());
          console.log(simbolo2.get());
          console.log("----------------");
          if (nodes.get(0).id==estadoActual && ((simbolo1.get()=='b'&&simbolo2.get()=="b")||(simbolo1.get()=='a'&&simbolo2.get()=="a"))){
               let temp1=[];
               temp1.push(simbolo1.get());
               let temp2=[];
               temp2.push(simbolo2.get());
               
                simbolo1.pop();
                simbolo2.pop();
                
                if(validaCadena(nodes.get(1).id,simbolo1,simbolo2)==true){
                  return true;
                }else{
                  simbolo1.push(temp1[temp1.length-1]);
                  simbolo2.push(temp2[temp2.length-1]);
                }
              }
              if(nodes.get(0).id==estadoActual && ((simbolo1.get()=='b'&&simbolo2.get()=="b")|| (simbolo1.get()=='a'&&simbolo2.get()=="b")||(simbolo1.get()=='b'&&simbolo2.get()=="a")||(simbolo1.get()=='b'&&simbolo2.get()=="#")||(simbolo1.get()=='a'&&simbolo2.get()=="#"))){
            simbolo2.push(simbolo1.get());
            simbolo1.pop();
            
           
            
            console.log(estadoActual);
             console.log(simbolo1.items);
            console.log(simbolo2.items);
            if(validaCadena(nodes.get(0).id,simbolo1,simbolo2)==true){
              return true;
              
            }else{
              simbolo1.push(simbolo2.get());
              simbolo2.pop();
              
              console.log(estadoActual);
             console.log(simbolo1.items);
            console.log(simbolo2.items);
            }
          }
              console.log("-----tercer if----");
              console.log(estadoActual);
          console.log(simbolo1.get());
          console.log(simbolo2.get());
          console.log("----------------");
          if (nodes.get(1).id==estadoActual && ((simbolo1.get()=='b'&&simbolo2.get()=="b")||(simbolo1.get()=='a'&&simbolo2.get()=="a"))){
              let temp11=[];
               temp11.push(simbolo1.get());
               let temp22=[];
               temp22.push(simbolo2.get());
                simbolo1.pop();
                simbolo2.pop();
                
                
                if(validaCadena(nodes.get(1).id,simbolo1,simbolo2)==true){
                  return true;
                }else{
                  simbolo1.push(temp11[temp11.length-1]);
                  simbolo2.push(temp22[temp22.length-1]);
                }
          }
          if (nodes.get(1).id==estadoActual && ((simbolo1.get()==undefined &&simbolo2.get()=="#"))){
              
            return true;
          }
          
          return false;

        }
      console.log(aceptaCadena(palabraIngresada,simbolosAceptados));
     
     
    </script>
   
  </body>
</html>
